# TC25061: Reset Password from Login Screen

**Azure Test Case ID:** 25061  
**Suite:** Login-25146  
**Category:** ✅ Pure-UI-Appropriate  
**Infrastructure Required:** Reset token generation utility

---

## Source Analysis

**Azure Test Case:**
- Step 1: "Login screen > Reset Password"
- Step 2: "User set up screen"
- Step 3: "My accounts page"
- Step 4: "Check the translated content in French"
- Confusing - lists multiple password reset locations

**Cypress Implementation:**
- File: `cypress/e2e/UserJourney/ResetPassword.cy.js`
- Tests:
  1. Request reset password form (UI validation)
  2. Look for email (Gmail API - NOT Pure UI)
  3. Navigate to reset link, validate password requirements, submit, login with new password

**What ResetPassword.cy.js does:**
- ✅ Click "Reset My Password" link
- ✅ Verify request form UI (fields, messages, buttons)
- ✅ Submit username for reset
- ✅ Verify confirmation page
- ❌ Check Gmail for email (email system dependency)
- ✅ Navigate to reset link with token
- ✅ Test password validation (too short, no uppercase, etc.)
- ✅ Submit valid new password
- ✅ Login with new password

---

## Final Test Specification

### What This Test Verifies
User can request password reset and complete the reset workflow from login screen.

### Prerequisites

**Seeded user for reset:**
- Username: "reset.test@activeops.com"
- Email: "reset.test@activeops.com"
- Current password: [seeded]
- Pre-generated reset token: [generated by utility]

**Infrastructure:**
- Reset token generation utility (creates valid tokens for seeded users per environment)

### Test Steps

**Part 1: Request Reset**
1. Navigate to login page
2. Click "Reset My Password" link
3. Verify: Request form displays
   - Title: "Request Password Reset"
   - Helper text about sending link
   - Username field
   - Cancel and Submit buttons
4. Enter username: "reset.test@activeops.com"
5. Click Submit
6. Verify: Confirmation page shows
   - "Reset Password Email Sent" message
   - Instructions about checking email
   - "Go to Login Screen" button

**Part 2: Reset Password Form (using seeded token)**
1. Navigate to `/resetpassword/{seededToken}`
2. Verify: Reset form displays
   - Title: "Reset Your Password"
   - Password requirements text
   - New Password field
   - Confirm New Password field
   - Cancel and Submit buttons

**Part 3: Password Validation**
1. Test password too short: Enter "Auto@23" → Verify error
2. Test no uppercase: Enter "autom@234" → Verify error
3. Test no symbols: Enter "Automation" → Verify error
4. Test password mismatch: Enter different passwords → Verify error

**Part 4: Successful Reset**
1. Enter valid new password (meets all requirements)
2. Confirm password matches
3. Click Submit
4. Verify: Success message "Your password has been reset successfully"
5. Click "Go to Login Screen"
6. Login with username and NEW password
7. Verify: Login successful, dashboard loads

### Expected Results
- Request form works correctly
- Reset form validates password requirements
- User can successfully reset password
- Login works with new password
- Old password no longer works

### Automation Approach
- **Pattern:** Pattern A (workflow test)
- **Page Objects:** LoginPage, ResetPasswordRequestPage, ResetPasswordPage, DashboardPage
- **Locators:**
  - Reset link: `Page.GetByRole(AriaRole.Button, new() { Name = "Reset My Password" })`
  - Username field: `Page.GetByRole(AriaRole.Textbox, new() { Name = "Username" })`
  - Password fields: GetByLabel for "New Password", "Confirm New Password"
  - Error messages: GetByText or by role Alert
- **Token:** Utility generates valid reset token for seeded user before test runs

---

## Notes
- Requires reset token generation utility (Phase 1 infrastructure task)
- Email delivery NOT tested (email system concern, not Pure UI)
- French translation ignored (not implemented in Cypress)
- Related: TC29201 (reset from staff setup), TC29202 (reset from My Account) use same token utility
